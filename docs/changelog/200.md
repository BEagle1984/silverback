---
uid: releases-200
---

# Release Notes v2.x.x

## [2.2.0](https://github.com/BEagle1984/silverback/releases/tag/v2.2.0)

### What's New

* Allow custom outbound routers to be registered as scoped or transient (instead of singleton only)

## [2.1.2](https://github.com/BEagle1984/silverback/releases/tag/v2.1.2)

### Fixes

* Fix delay in Retry policy [[#97](https://github.com/BEagle1984/silverback/issues/97)]

## [2.1.1](https://github.com/BEagle1984/silverback/releases/tag/v2.1.1)

### What's New

* Add support for multiple message brokers (Kafka and RabbitMQ) in the same application (see <xref:message-broker>)
* Add end-to-end message encryption (see <xref:encryption>)
* Add dynamic custom routing of outbound messages (see <xref:outbound-routing>)
* Improve support for message headers (see <xref:headers>)
* Add support for binary files (see <xref:binary-files>)
* Improve message identifier handling: the <xref:Silverback.Messaging.Messages.IIntegrationMessage> is not required to have an `Id` property anymore (the `x-message-id` header will still be generated and if the property exists will continue to be automatically initialized)
* `x-first-chunk-offset` header added by default (see <xref:headers>)
* Deserialize _KafkaStasticsEvent_ JSON and provided its content as an object (in addition to the raw JSON)
* Add support for [Apache Avro](https://avro.apache.org/) and schema registry (see <xref:serialization>)
* Upgrade to [Confluent.Kafka 1.4.2](https://github.com/confluentinc/confluent-kafka-dotnet/releases/tag/v1.4.2)
* Add consumer `PrefetchSize` and `PrefetchCount` settings to <xref:Silverback.Messaging.RabbitConsumerEndpoint>
* Add `AcknowledgeEach` to the <xref:Silverback.Messaging.RabbitConsumerEndpoint> to define the number of message processed before sending the acknowledgment to the server
* Upgrade to [RabbitMQ.Client 6.0.0](https://github.com/rabbitmq/rabbitmq-dotnet-client/releases/tag/v6.0.0)
* Improve message type resolution performance and reliability in <xref:Silverback.Messaging.Serialization.JsonMessageSerializer>
* Add `LogWithLevel` method to <xref:Silverback.Messaging.Inbound.ErrorHandling.SkipMessageErrorPolicy> to specify the desired level for the "Message skipped" log entry (the default is now increased to `Error`)

### Breaking Changes

These changes shouldn't affect you unless you built your own <xref:Silverback.Messaging.Broker.IBroker> implementation or are interacting at low-level with the <xref:Silverback.Messaging.Broker.IBroker> (this is why has been decided to still mark this as a minor release):

* The <xref:Silverback.Messaging.Broker.IBroker> interface and <xref:Silverback.Messaging.Broker.Broker`2> abstract base class have been modified to explicitly declare which endpoint type is being handled by the broker implementation
* The <xref:Silverback.Messaging.Serialization.IMessageSerializer> interfaces has been changed
* The <xref:Silverback.Messaging.Broker.Behaviors.IConsumerBehavior> and <xref:Silverback.Messaging.Broker.Behaviors.IProducerBehavior> interfaces have been changed
* Changed the parameters order in some less used overloads in the _IBrokerOptionBuilder_

### Announced Breaking Changes

These aren't real breaking changes but some methods have been marked as deprecated and will be removed in one of the next major releases:

* `WithConnectionTo<>`, `WithConnectionToKafka` and `WithConnectionToRabbitMQ` are deprecated (they will still be supported in this version), please use the new `WithConnectionToMessageBroker` and `AddKafka`/`AddRabbit` methods (see <xref:message-broker>)

## [2.0.0](https://github.com/BEagle1984/silverback/releases/tag/v2.0.0)

### What's New

* Create [Silverback.Integration.RabbitMQ](https://www.nuget.org/packages/Silverback.Integration.RabbitMQ) package to connect Silverback with RabbitMQ (see <xref:message-broker>)
* Enable subscription of messages with an empty body (you must subscribe to the <xref:Silverback.Messaging.Messages.IInboundEnvelope>) [[#61](https://github.com/BEagle1984/silverback/issues/61)]
* Add hook to manually set the Kafka partition start offset when a partition is assigned to the consumer (see <xref:kafka-events>) [[#57](https://github.com/BEagle1984/silverback/issues/57)]
* Support for multiple consumer groups running in the same process (see <xref:kafka-consumer-groups>) [[#59](https://github.com/BEagle1984/silverback/issues/59)]
* Publish _KafkaStatisticsEvent_ also from the <xref:Silverback.Messaging.Broker.KafkaProducer> (previously done in <xref:Silverback.Messaging.Broker.KafkaConsumer> only)
* Several reliability and performance related improvements

### Breaking Changes

* The <xref:Silverback.Messaging.Broker.IBroker>, <xref:Silverback.Messaging.Broker.IProducer> and <xref:Silverback.Messaging.Broker.IConsumer> interfaces have been slightly modified (it shouldn't affect you unless you built your own <xref:Silverback.Messaging.Broker.IBroker> implementation)
* Many interfaces (such as <xref:Silverback.Messaging.Publishing.IBehavior>) and delegates have been slightly modified to pass around an [IReadOnlyCollection<T>](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.ireadonlycollection-1) instead of an [IEnumerable<T>](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1), to avoid the possible issues related to multiple enumeration of an [IEnumerable](https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerable)
* The _IMessageKeyProvider_ interface has been renamed to _IMessageIdProvider_ to prevent to be mistaken with the Kafka Key or Rabbit's Routing Key
* _IInboundMessage_/_IOutboundMessage_ (plus all the related types) have been renamed to <xref:Silverback.Messaging.Messages.IInboundEnvelope>/<xref:Silverback.Messaging.Messages.IOutboundEnvelope> and the property containing the actual message has been renamed from `Content` to `Message`
* The `MustUnwrap` option has been removed from the inbound connector configuration (messages are unwrapped by default)
