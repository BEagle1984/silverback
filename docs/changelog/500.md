---
uid: releases-500
---

# Release Notes v5.x.x

## [5.0.0-beta.1](https://github.com/BEagle1984/silverback/releases/tag/v5.0.0-beta.1)

Silverback 5.0.0 is the most significant update in the library’s history, built on years of user feedback and real-world experience. This release is more than just an upgrade—it’s a **complete refactoring** that enhances flexibility, performance, and maintainability while laying a strong foundation for future innovations.

### Highlights

- **Improved Design & Architecture** – Addressing previous design limitations, this version introduces a more modular and extensible architecture, making it easier to customize and extend.
- **Enhanced Flexibility** – With a restructured core, Silverback now adapts better to different messaging patterns and integration needs.
- **Performance Optimizations** – Various internal improvements lead to lower overhead, faster processing, and better scalability.
- **Better Developer Experience** – The API has been refined to be more intuitive and consistent, reducing complexity and improving usability.
- **Future-Proof Foundation** – By tackling long-standing architectural challenges, this version paves the way for upcoming features and integrations.

This release wouldn’t have been possible without the **valuable feedback from the community**, helping shape Silverback into a more **powerful, robust, and future-ready** framework.

### What's New
### (TODO: LINK TO DOCS)

* Support Kafka cooperative sticky partition assignment strategy
* Increase default [KafkaConsumerEndpoint.MaxDegreeOfParallelism](xref:Silverback.Messaging.KafkaConsumerEndpoint#Silverback_Messaging_KafkaConsumerEndpoint_MaxDegreeOfParallelism) to 100
* TO-BE-REVIEWED
    * New AddHeader overloads with only message
    * New WithMessageId overloads with only message
    * WithKafkaKey overloads with only message
    * AddInbound/AddOutbound with message type (influencing AddHeader etc.)
    * Default serializer is typed and now works with sub-typed (document in serializer page)
    * BinarySerializer now selected automatically from message type (no need to call Produce-/ConsumeBinaryMessages)
    * Builders for client config?
    * New Storage packages (see...)
    * Storage.SQLite, Storage.Postgres, ...
    * New Outbox with Enlist for transaction
    * StorageInitializer to create tables
    * Client side offset storage (w/ transaction)
    * Fluent API for connection options
    * JsonSerializer typename handling none by default (Security)
    * Outbound message filter
    * Kafka transactions (including consumer, see...)
    * Transparent Tombstone handling (new suggested way should be to work with envelope when batch processing and in general too)
    * Envelope.IsTombstone() and Kafka envelope extensions
    * New improved EntityFrameworkDomainEventsPublisher
* Clean up code and increase tests coverage
* Reduce allocations
* Improve builders for error policies
* Support subscribers returning `ValueTask`
* Support exponential delay in `RetryErrorPolicy`
* `WrapAndPublishAsync` methods added to <xref:IPublisher> (see <xref:IntegrationPublisherExtensions>) to allow envelope enrichment (setting headers, key, etc.) -> TODO: LINKS TO CONCEPT PAGE
* Add `WrapAndPublishBatchAsync` methods to <xref:IPublisher> (see <xref:IntegrationPublisherExtensions>) to allow envelope enrichment (setting headers, key, etc.) and efficient batching at protocol level (Kafka) -> TODO: LINKS TO CONCEPT PAGE showing mapping etc.
* Add support for Confluent schema registry (Avro, Json and Protobuf), including mock for in-memory testing
* Add <xref:InboundEnvelopeBuilder> and <xref:OutboundEnvelopeBuilder> to testing packages to help creating test envelopes
* Add `IgnoreNoMatchingSubscribersError` setting to MQTT producer endpoints, to prevent throwing when no subscriber is consuming the produced message
* Add `CancellationToken` support to in-memory message bus (TODO: see...)
* Increase default `KafkaConsumer` backpressure limit to 50
* Basic support for MQTT 5 request-response
* Improved outbox worker reliability
* Improved `ITestingHelper` to allow waiting for specific topics to be consumed

* Upgrade to [Confluent.Kafka 2.8.0](https://github.com/confluentinc/confluent-kafka-dotnet/releases/tag/v2.2.0)

### Breaking Changes

* Changed some details in <xref:Silverback.Messaging.Broker.IBroker>/<xref:Silverback.Messaging.Broker.IConsumer> and their implementations
* Reorganized the configuration namespaces, some extension methods might have been moved to a different namespace, thus requiring a different `using`.
* Refactored the endpoint models
    * Changed the endpoint models to [records](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/record) with init-only properties
    * Removed constructors with parameters
    * Refactored, redesigned and deprecated some properties
    * Building the endpoints directly is still supported but the strongly recommended preferred way is to use the builders, therefore from now on the documentation will only show that approach
    * TO-DO: Endpoint to Configuration and related renames (builders, etc.)
* Removed the `IOutboundRouter` interface and all `AddOutbound` overloads accepting a custom `IOutboundRouter`
* Removed all builders interfaces and exposed the actual classes directly (e.g. `ISilverbackBuilder` to `SilverbackBuilder`)
* Replaced `Endpoint`, `ProducerEndpoint` and `ConsumerEndpoint` with <xref:EndpointConfiguration>, <xref:ProducerConfiguration>, <xref:ConsumerConfiguration>
* Removed `IEndpoint`, `ProducerEndpoint` and `IConsumerEndpoint` interfaces
* `SubscriptionOptions` to `TypeSubscriptionOption` / `DelegateSubscriptionOptions`
* TO-BE-COMPARED / TO-BE-REVIEWED
    * IMessageSerializer
    * IKafkaProducerEndpointNameResolver
    * ConsumerBuilder / ProducerBuilder
    * UseEndpointNameResolver to UseEndpointResolver (and interface name)
    * ProduceTo with delegates only receive message instead of envelope (same for resolver)
    * Endpoint builders functions now work with `TMessage` instead of `Envelope<TMessage>` (e.g. `ProducerTo`)
    * AddOutboundEndpointsCheck renamed to AddProducersCheck
    * IOutboundQueueHealthCheckService to IOutboxHealthCheckService
    * Configuration namespace changed from Messaging.Configuration to Configuration for some types (ISilverbackConfigurator)
    * EndpointsConfiguration redesigned completely
        * Endpoints configuration moved completely under `Messaging.Configuration` namespace
    * KafkaEndpoint.Configure -> KafkaConfiguration.ConfigureClient
    * Broker -> BrokerBase
    * AddConsumer -> AddConsumerAsync / GetProducer -> GetProducerAsync
    * BinaryFileMessage and serializers renamed to BinaryFile + ConsumeBinaryFiles -> ConsumeBinaryMessages
    * DistributedBackgroundService / RecurringDBS
    * IOutboxReader / IOutboxWriter namespace + move to storage
    * Publisher and behaviors to `ValueTask`
    * `Helper.GetProducer` and other differences
    * `Add*BrokerCallbackHandler` to `Add*BrokerClientCallback` (`IBrokerCallback` to `IBrokerClientCallback`)
    * `IEndpointsConfiguredCallback` to `IBrokerClientsConfiguredCallback`
    * Removed `EndpointBuilder.WithName()` -> replaced by name parameter
    * Renamed Inbound namespace to Consuming and Outbound to Producing
    * Split IMessageSerializer / IMessageDeserializer and rename UseFixedType to UseModel
    * Removed Ping health check
    * Kafka key not set to random Guid anymore (will be null if not explicitly set)
    * Merged MessageId and KafkaKey headers -> MessageId will not be initialized with random Guid anymore
    * Deprecated the ProduceAsync with callback (it didn't make sense)
    * Deprecated NullMessageHandlingStrategy (now tombstones can always be consumed both as `null` or as `Tombstone`)
    * Moved `PublishToInternalBus` 
    * WithKafkaKey -> SetKafkaKey
    * IBehavior will be invoked for produced messages only with EnableSubscribing (see also SortIndex)
* `BatchSettings`, `ChunkSettings`, `SequenceSettings`, ` EncryptionSettings`, etc. renamed to `BatchConfiguration`, `ChunkConfiguration`, `SequenceConfiguration`, ` EncryptionConfiguration`, etc.
* Deprecated EF package
* Changed integration of domain entities / domain events with DbContext
* Deprecated ExactlyOnceStrategy -> replaced with ???client-side-offset-storage???
* Slight changes to policy builder (e.g. removed some overloads of PolicyBuilder.Retry/ThenRetru)
* Some changes to the `AddDelegateSubscriber` methods
* IBroker/IBrokerCollection -> IProducerFactory / IConsumerCollection
* Additional changes to configuration
* Removed `AddConsumer`/`AddProducer` from `IBroker`/`IBrokerCollection`
* e.g. `KafkaBroker.GetProducer` -> `IProducerFactory.GetProducer(endpointName)`/`IProducerFactory.GetProducer<TProducer>(endpointName)`/`IProducerFactory.GetProducer(configuration)`/...
* Changes to Kafka callbacks (stats etc.) -> replaced producer/consumer
* PartitionOffsetsProvider returns `ValueTask`
* Many interfaces changed to return a `ValueTask` instead of `Task`:
    * `IPublisher` async methods
    * `IBehavior`, `IProducerBehavior`, `IConsumerBehavior`
* `IEventPublisher`, `ICommandPublisher` and `IQueryPublisher` replaced by extension methods on the <xref:IPublisher>
    * Removed the `UseModel` method

### Deprecation Notice

The support for RabbitMQ has been deprecated? (...in case explain motivation etc....)
