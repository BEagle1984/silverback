<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Kafka Events | Silverback </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Kafka Events | Silverback ">
    <meta name="generator" content="docfx 2.56.5.0">
    
  
    <link rel="apple-touch-icon" sizes="180x180" href="../../images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../images/icons/favicon-16x16.png">
    <link rel="manifest" href="../../images/icons/site.webmanifest">
    <link rel="mask-icon" href="../../images/icons/safari-pinned-tab.svg" color="#5bbad5">
  
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
    <script src="https://kit.fontawesome.com/e3306be642.js" crossorigin="anonymous"></script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="kafka-events">
<h1 id="kafka-events">Kafka Events</h1>

<p>To let you catch the Kafka events (fired for example when the partions are assigned or revoked) they are mapped to some events that are published to the internal bus.</p>
<h2 id="consumer-events">Consumer events</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Event</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>KafkaPartitionsAssignedEvent</code></td>
<td style="text-align: left;">The event fired when a new consumer group partition assignment has been received by a consumer. Corresponding to each of this events there will be a <code>KafkaPartitionsRevokedEvent</code>. This event is important if you need to manually set the start offset (see the sample code below in the samples section).</td>
</tr>
<tr>
<td style="text-align: left;"><code>KafkaPartitionsRevokedEvent</code></td>
<td style="text-align: left;">The event fired prior to a group partition assignment being revoked. Corresponding to each of this events there will be a <code>KafkaPartitionsAssignedEvent</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>KafkaOffsetsCommittedEvent</code></td>
<td style="text-align: left;">The event fired to report the result of the offset commits.</td>
</tr>
<tr>
<td style="text-align: left;"><code>KafkaErrorEvent</code></td>
<td style="text-align: left;">The event fired when an error is reported by the <code>Confluent.Kafka.Consumer</code> (e.g. connection failures or all brokers down). Note that the system (either the Kafka client itself or Silverback) will try to automatically recover from all errors automatically, so these errors have to be considered purely informational. The subscriber can set the <code>Handled</code> property to prevent Silverback to log the error (useful if you are logging it already).</td>
</tr>
<tr>
<td style="text-align: left;"><code>KafkaStatisticsEvent</code></td>
<td style="text-align: left;">The event fired when statistics are received. Statistics are provided as a JSON formatted string as defined in the <a href="https://github.com/edenhill/librdkafka/blob/master/STATISTICS.md">librdkafka documentation</a>. You can enable statistics and set the statistics interval using the <code>StatisticsIntervalMs</code> configuration parameter (disabled by default).</td>
</tr>
</tbody>
</table>
<h2 id="sample-use-cases">Sample use cases</h2>
<h3 id="setting-starting-offsets-on-partitions-assignment">Setting starting offsets on partitions assignment</h3>
<p>In the following example the <code>KafkaPartitionsAssignedEvent</code> is subscribed in order to reset the start offsets and replay the past messages.</p>
<pre><code class="lang-csharp">public class KafkaEventsSubscriber
{
    public void OnPartitionsAssigned(KafkaPartitionsAssignedEvent message)
    {
        message.Partitions = message.Partitions
            .Select(topicPartitionOffset =&gt;
                new TopicPartitionOffset(
                    topicPartitionOffset.TopicPartition,
                    Offset.Beginning))
            .ToList();
    }
}
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/beagle1984/silverback/blob/master/docs/concepts/04-kafka/03-kafka-events.md/#L1" class="contribution-link">Improve this doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="footer">
          <div class="container contacts">
            <a href="https://github.com/BEagle1984" rel="nofollow noopener noreferrer"><i class='fab fa-github'></i> GitHub</a>
            <a href="mailto:silverback-project@outlook.com" rel="nofollow noopener noreferrer"><i class='fas fa-envelope'></i> E-Mail</a>
          </div>
          <div class="container">
            <span class="pull-right">
              <a href="#top">&uarr; Back to top</a>
            </span>
            © 2020 Sergio Aquilini
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
