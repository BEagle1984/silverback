<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Creating the Message model | Silverback </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Creating the Message model | Silverback ">
    <meta name="generator" content="docfx 2.59.4.0">
    
  
    <link rel="apple-touch-icon" sizes="180x180" href="../../images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../images/icons/favicon-16x16.png">
    <link rel="manifest" href="../../images/icons/site.webmanifest">
    <link rel="mask-icon" href="../../images/icons/safari-pinned-tab.svg" color="#5bbad5">
  
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
    <script src="https://kit.fontawesome.com/e3306be642.js" crossorigin="anonymous"></script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="model">
<h1 id="creating-the-message-model">Creating the Message model</h1>

<h2 id="basics">Basics</h2>
<p>First of all we need to create a message class. The message class can be any POCO class, it just need to be serializable.</p>
<pre><code class="lang-csharp">public class SampleMessage
{
    public string Content { get; set; }
}
</code></pre>
<p>It is very much suggested to consider using the <a href="https://www.nuget.org/packages/Silverback.Core.Model">Silverback.Core.Model</a> package (documented in the next chapter) to better organize your message and write better and more readable code.</p>
<h2 id="silverbackcoremodel">Silverback.Core.Model</h2>
<p>A hierarchy of interfaces is available in <a href="https://www.nuget.org/packages/Silverback.Core.Model">Silverback.Core.Model</a> to help specify the meaning of each message and produce in better, cleaner and more readable code.</p>
<p>The <em>internal messages</em> are being sent through the internal in-memory bus and don't leave the service scope, while the <em>integration messages</em> are those messages exchanged between different microservices, through a message broker like Apache Kafka or RabbitMQ.</p>
<p>Event though strongly suggested, it's not mandatory to use the proposed hierarchy from <a href="https://www.nuget.org/packages/Silverback.Core.Model">Silverback.Core.Model</a> and everything can be achieved using POCO classes as messages and using the generic &lt;xref:Silverback.Messaging.Publishing.IPublisher&gt; to publish them.</p>
<p>In the following chapters you will find an overview of the different message types and their meaning but first of all we need to reference the <a href="https://www.nuget.org/packages/Silverback.Core.Model">Silverback.Core.Model</a> package and register it with the dependency injection.</p>
<pre><code class="lang-csharp">public class Startup
{
    public void ConfigureServices(IServiceCollection services)
    {
        services.AddSilverback().UseModel();
    }
}
</code></pre>
<h3 id="internal-messages">Internal Messages</h3>
<p>This messages can be used internally to the microservice bus but cannot be relayed to the message broker. See <a class="xref" href="../broker/translating-messages.html">Translating Messages</a> for a convenient way to map the internal message to an &lt;xref:Silverback.Messaging.Messages.IIntegrationMessage&gt;.</p>
<h4 id="events">Events</h4>
<p>&lt;xref:Silverback.Messaging.Messages.IEvent&gt; is to be used to notify thing that happened inside a service and may be of some interest for one or more other service. The events are a fire-and-forget message type and no response is expected.</p>
<p>The &lt;xref:Silverback.Domain.IDomainEvent&gt; and &lt;xref:Silverback.Domain.IDomainEvent`1&gt; extend &lt;xref:Silverback.Messaging.Messages.IEvent&gt; and the types implementing this interface are usually published only from within the domain entities (actually adding them to the internal collection and letting them be published during the save changes transaction). See also <a class="xref" href="../domain-events.html">DDD and Domain Events</a>.</p>
<h4 id="commands">Commands</h4>
<p>&lt;xref:Silverback.Messaging.Messages.ICommand&gt; or &lt;xref:Silverback.Messaging.Messages.ICommand`1&gt; are used to trigger an action in another service or component and are therefore very specific and usually consumed by one single subscriber. This messages can return a value (of type TResult).</p>
<h4 id="queries">Queries</h4>
<p>&lt;xref:Silverback.Messaging.Messages.IQuery`1&gt; works exactly like &lt;xref:Silverback.Messaging.Messages.ICommand`1&gt;. This messages are obviously always returning something since they represent a request for data (query).</p>
<h3 id="integration-messages">Integration messages</h3>
<p>The &lt;xref:Silverback.Messaging.Messages.IIntegrationMessage&gt; interface identifies those messages that are either published to the message broker or received through it.</p>
<p>Note that &lt;xref:Silverback.Messaging.Messages.IIntegrationMessage&gt; implements &lt;xref:Silverback.Messaging.Messages.IMessage&gt;, obviously.</p>
<h4 id="integration-event">Integration Event</h4>
<p>&lt;xref:Silverback.Messaging.Messages.IIntegrationEvent&gt; can be used to export events to other microservices or, more generally, other applications.</p>
<p>&lt;xref:Silverback.Messaging.Publishing.IEventPublisher&gt; can be used to publish these events and they will automatically be routed to the message broker if an outbound connector was properly configured. See <a class="xref" href="../broker/connecting.html">Connecting to a Message Broker</a> for details.</p>
<h4 id="integration-command">Integration Command</h4>
<p>&lt;xref:Silverback.Messaging.Messages.IIntegrationCommand&gt; is used to trigger an action on another microservices (or application).</p>
<p>&lt;xref:Silverback.Messaging.Publishing.ICommandPublisher&gt; can be used to publish these messages and they will automatically be routed to the message broker if an outbound connector was properly configured. See <a class="xref" href="../broker/connecting.html">Connecting to a Message Broker</a> for details.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/beagle1984/silverback/blob/master/docs/concepts/bus/model.md/#L1" class="contribution-link">Improve this doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="footer">
          <div class="container contacts">
            <a href="https://github.com/BEagle1984" rel="nofollow noopener noreferrer"><i class='fab fa-github'></i> GitHub</a>
            <a href="mailto:silverback-project@outlook.com" rel="nofollow noopener noreferrer"><i class='fas fa-envelope'></i> E-Mail</a>
          </div>
          <div class="container">
            <span class="pull-right">
              <a href="#top">&uarr; Back to top</a>
            </span>
            © 2020 Sergio Aquilini
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
