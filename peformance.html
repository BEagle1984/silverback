<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Performance | Silverback </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Performance | Silverback ">
    <meta name="generator" content="docfx ">
  

    <link rel="apple-touch-icon" sizes="180x180" href="images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/icons/favicon-16x16.png">
    <link rel="manifest" href="images/icons/site.webmanifest">
    <link rel="mask-icon" href="images/icons/safari-pinned-tab.svg" color="#5bbad5">

    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
  
  <meta property="docfx:rel" content="">
  
    <script src="https://kit.fontawesome.com/e3306be642.js" crossorigin="anonymous"></script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="images/logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="performance">
<h1 id="performance">Performance</h1>

<p>Silverback tries to improve the performance with every release and a huge effort is put into optimizing the code and the integration with the underlying libraries. The development of v5.0.0 especially focused on performance improvements in several areas and the results speak for themselves. There surely is still room for further optimizations, but the current state is already quite satisfying.</p>
<h2 id="benchmark-results">Benchmark Results</h2>
<p>The following benchmarks were executed on a Windows 11 machine with an Intel(R) Core(TM) i9-10850K CPU @ 3.60GHz and 32 GB RAM. The benchmarks are built using the <a href="https://benchmarkdotnet.org/">BenchmarkDotNet</a> library and the source code is available on <a href="https://github.com/BEagle1984/silverback/tree/master/benchmarks">GitHub</a>.</p>
<h3 id="mediator">Mediator</h3>
<h4 id="v451">v4.5.1</h4>
<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">Error</th>
<th style="text-align: right;">StdDev</th>
<th style="text-align: right;">Gen0</th>
<th style="text-align: right;">Gen1</th>
<th style="text-align: right;">Allocated</th>
</tr>
</thead>
<tbody>
<tr>
<td>Publish with single sync subscriber</td>
<td style="text-align: right;">3.482 us</td>
<td style="text-align: right;">0.0301 us</td>
<td style="text-align: right;">0.0267 us</td>
<td style="text-align: right;">1.0529</td>
<td style="text-align: right;">0.2594</td>
<td style="text-align: right;">10.49 KB</td>
</tr>
<tr>
<td>Publish with single async subscriber</td>
<td style="text-align: right;">5.229 us</td>
<td style="text-align: right;">0.0432 us</td>
<td style="text-align: right;">0.0404 us</td>
<td style="text-align: right;">1.1292</td>
<td style="text-align: right;">0.2747</td>
<td style="text-align: right;">11.4 KB</td>
</tr>
<tr>
<td>Publish with multiple sync subscribers</td>
<td style="text-align: right;">4.036 us</td>
<td style="text-align: right;">0.0264 us</td>
<td style="text-align: right;">0.0220 us</td>
<td style="text-align: right;">1.0910</td>
<td style="text-align: right;">0.2670</td>
<td style="text-align: right;">10.91 KB</td>
</tr>
<tr>
<td>Publish with multiple async subscribers</td>
<td style="text-align: right;">8.484 us</td>
<td style="text-align: right;">0.0808 us</td>
<td style="text-align: right;">0.0716 us</td>
<td style="text-align: right;">1.3428</td>
<td style="text-align: right;">0.3052</td>
<td style="text-align: right;">13.65 KB</td>
</tr>
<tr>
<td>Publish with multiple sync and async subscribers</td>
<td style="text-align: right;">5.858 us</td>
<td style="text-align: right;">0.0667 us</td>
<td style="text-align: right;">0.0624 us</td>
<td style="text-align: right;">1.1597</td>
<td style="text-align: right;">0.2747</td>
<td style="text-align: right;">11.65 KB</td>
</tr>
<tr>
<td>PublishAsync with single sync subscriber</td>
<td style="text-align: right;">3.396 us</td>
<td style="text-align: right;">0.0177 us</td>
<td style="text-align: right;">0.0166 us</td>
<td style="text-align: right;">1.0376</td>
<td style="text-align: right;">0.2861</td>
<td style="text-align: right;">10.32 KB</td>
</tr>
<tr>
<td>PublishAsync with single async subscriber</td>
<td style="text-align: right;">5.861 us</td>
<td style="text-align: right;">0.0591 us</td>
<td style="text-align: right;">0.0461 us</td>
<td style="text-align: right;">1.1597</td>
<td style="text-align: right;">0.2441</td>
<td style="text-align: right;">11.11 KB</td>
</tr>
<tr>
<td>PublishAsync with multiple sync subscribers</td>
<td style="text-align: right;">3.997 us</td>
<td style="text-align: right;">0.0411 us</td>
<td style="text-align: right;">0.0384 us</td>
<td style="text-align: right;">1.0681</td>
<td style="text-align: right;">0.2670</td>
<td style="text-align: right;">10.63 KB</td>
</tr>
<tr>
<td>PublishAsync with multiple async subscribers</td>
<td style="text-align: right;">14.188 us</td>
<td style="text-align: right;">0.2578 us</td>
<td style="text-align: right;">0.2411 us</td>
<td style="text-align: right;">1.2817</td>
<td style="text-align: right;">0.3052</td>
<td style="text-align: right;">12.53 KB</td>
</tr>
<tr>
<td>PublishAsync with multiple sync and async subscribers</td>
<td style="text-align: right;">7.038 us</td>
<td style="text-align: right;">0.1091 us</td>
<td style="text-align: right;">0.1020 us</td>
<td style="text-align: right;">1.1597</td>
<td style="text-align: right;">0.2441</td>
<td style="text-align: right;">11.29 KB</td>
</tr>
</tbody>
</table>
<h4 id="v500">v5.0.0</h4>
<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">Error</th>
<th style="text-align: right;">StdDev</th>
<th style="text-align: right;">Gen0</th>
<th style="text-align: right;">Allocated</th>
</tr>
</thead>
<tbody>
<tr>
<td>Publish with single sync subscriber</td>
<td style="text-align: right;">549.6 ns</td>
<td style="text-align: right;">3.43 ns</td>
<td style="text-align: right;">2.87 ns</td>
<td style="text-align: right;">0.0849</td>
<td style="text-align: right;">896 B</td>
</tr>
<tr>
<td>Publish with single async subscriber</td>
<td style="text-align: right;">1,586.0 ns</td>
<td style="text-align: right;">13.75 ns</td>
<td style="text-align: right;">12.19 ns</td>
<td style="text-align: right;">0.1297</td>
<td style="text-align: right;">1367 B</td>
</tr>
<tr>
<td>Publish with multiple sync subscribers</td>
<td style="text-align: right;">1,295.7 ns</td>
<td style="text-align: right;">20.67 ns</td>
<td style="text-align: right;">19.34 ns</td>
<td style="text-align: right;">0.1354</td>
<td style="text-align: right;">1424 B</td>
</tr>
<tr>
<td>Publish with multiple async subscribers</td>
<td style="text-align: right;">4,282.9 ns</td>
<td style="text-align: right;">48.49 ns</td>
<td style="text-align: right;">45.36 ns</td>
<td style="text-align: right;">0.2670</td>
<td style="text-align: right;">2838 B</td>
</tr>
<tr>
<td>Publish with multiple sync and async subscribers</td>
<td style="text-align: right;">2,253.0 ns</td>
<td style="text-align: right;">37.62 ns</td>
<td style="text-align: right;">35.19 ns</td>
<td style="text-align: right;">0.1717</td>
<td style="text-align: right;">1800 B</td>
</tr>
<tr>
<td>PublishAsync with single sync subscriber</td>
<td style="text-align: right;">558.3 ns</td>
<td style="text-align: right;">5.98 ns</td>
<td style="text-align: right;">5.30 ns</td>
<td style="text-align: right;">0.0849</td>
<td style="text-align: right;">896 B</td>
</tr>
<tr>
<td>PublishAsync with single async subscriber</td>
<td style="text-align: right;">1,870.6 ns</td>
<td style="text-align: right;">7.80 ns</td>
<td style="text-align: right;">6.92 ns</td>
<td style="text-align: right;">0.1926</td>
<td style="text-align: right;">2006 B</td>
</tr>
<tr>
<td>PublishAsync with multiple sync subscribers</td>
<td style="text-align: right;">1,286.3 ns</td>
<td style="text-align: right;">6.54 ns</td>
<td style="text-align: right;">5.46 ns</td>
<td style="text-align: right;">0.1354</td>
<td style="text-align: right;">1424 B</td>
</tr>
<tr>
<td>PublishAsync with multiple async subscribers</td>
<td style="text-align: right;">5,734.0 ns</td>
<td style="text-align: right;">23.99 ns</td>
<td style="text-align: right;">22.44 ns</td>
<td style="text-align: right;">0.4120</td>
<td style="text-align: right;">4279 B</td>
</tr>
<tr>
<td>PublishAsync with multiple sync and async subscribers</td>
<td style="text-align: right;">2,734.4 ns</td>
<td style="text-align: right;">11.75 ns</td>
<td style="text-align: right;">10.41 ns</td>
<td style="text-align: right;">0.2708</td>
<td style="text-align: right;">2835 B</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">Error</th>
<th style="text-align: right;">StdDev</th>
<th style="text-align: right;">Gen0</th>
<th style="text-align: right;">Allocated</th>
</tr>
</thead>
<tbody>
<tr>
<td>'Publish with single sync subscriber'</td>
<td style="text-align: right;">528.8 ns</td>
<td style="text-align: right;">3.25 ns</td>
<td style="text-align: right;">2.88 ns</td>
<td style="text-align: right;">0.0858</td>
<td style="text-align: right;">904 B</td>
</tr>
<tr>
<td>'Publish with single async subscriber'</td>
<td style="text-align: right;">1,592.1 ns</td>
<td style="text-align: right;">19.88 ns</td>
<td style="text-align: right;">18.59 ns</td>
<td style="text-align: right;">0.1297</td>
<td style="text-align: right;">1375 B</td>
</tr>
<tr>
<td>'Publish with multiple sync subscribers'</td>
<td style="text-align: right;">546.2 ns</td>
<td style="text-align: right;">5.68 ns</td>
<td style="text-align: right;">5.31 ns</td>
<td style="text-align: right;">0.0858</td>
<td style="text-align: right;">904 B</td>
</tr>
<tr>
<td>'Publish with multiple async subscribers'</td>
<td style="text-align: right;">1,657.0 ns</td>
<td style="text-align: right;">25.14 ns</td>
<td style="text-align: right;">23.52 ns</td>
<td style="text-align: right;">0.1297</td>
<td style="text-align: right;">1374 B</td>
</tr>
<tr>
<td>'Publish with multiple sync and async subscribers'</td>
<td style="text-align: right;">2,274.4 ns</td>
<td style="text-align: right;">20.24 ns</td>
<td style="text-align: right;">18.93 ns</td>
<td style="text-align: right;">0.1717</td>
<td style="text-align: right;">1807 B</td>
</tr>
<tr>
<td>'PublishAsync with single sync subscriber'</td>
<td style="text-align: right;">557.9 ns</td>
<td style="text-align: right;">3.79 ns</td>
<td style="text-align: right;">3.36 ns</td>
<td style="text-align: right;">0.0858</td>
<td style="text-align: right;">904 B</td>
</tr>
<tr>
<td>'PublishAsync with single async subscriber'</td>
<td style="text-align: right;">1,804.0 ns</td>
<td style="text-align: right;">24.96 ns</td>
<td style="text-align: right;">23.34 ns</td>
<td style="text-align: right;">0.1965</td>
<td style="text-align: right;">2062 B</td>
</tr>
<tr>
<td>'PublishAsync with multiple sync subscribers'</td>
<td style="text-align: right;">564.2 ns</td>
<td style="text-align: right;">2.78 ns</td>
<td style="text-align: right;">2.60 ns</td>
<td style="text-align: right;">0.0858</td>
<td style="text-align: right;">904 B</td>
</tr>
<tr>
<td>'PublishAsync with multiple async subscribers'</td>
<td style="text-align: right;">1,818.6 ns</td>
<td style="text-align: right;">10.61 ns</td>
<td style="text-align: right;">9.40 ns</td>
<td style="text-align: right;">0.1965</td>
<td style="text-align: right;">2062 B</td>
</tr>
<tr>
<td>'PublishAsync with multiple sync and async subscribers'</td>
<td style="text-align: right;">2,724.3 ns</td>
<td style="text-align: right;">14.32 ns</td>
<td style="text-align: right;">13.39 ns</td>
<td style="text-align: right;">0.2747</td>
<td style="text-align: right;">2892 B</td>
</tr>
</tbody>
</table>
<h4 id="comparison-v500-vs-v451">Comparison v5.0.0 vs. v4.5.1</h4>
<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align: right;">Mean 4.5.1</th>
<th style="text-align: right;">Mean 5.0.0</th>
<th style="text-align: right;">Mean Diff</th>
<th style="text-align: right;">Allocated 4.5.1</th>
<th style="text-align: right;">Allocated 5.0.0</th>
<th style="text-align: right;">Allocated Diff</th>
</tr>
</thead>
<tbody>
<tr>
<td>Publish with single sync subscriber</td>
<td style="text-align: right;">3.482 us</td>
<td style="text-align: right;">0.529 us</td>
<td style="text-align: right;">-85 %</td>
<td style="text-align: right;">10.49 KB</td>
<td style="text-align: right;">0.904 KB</td>
<td style="text-align: right;">-91 %</td>
</tr>
<tr>
<td>Publish with single async subscriber</td>
<td style="text-align: right;">5.229 us</td>
<td style="text-align: right;">1.592 us</td>
<td style="text-align: right;">-70 %</td>
<td style="text-align: right;">11.40 KB</td>
<td style="text-align: right;">1.375 KB</td>
<td style="text-align: right;">-88 %</td>
</tr>
<tr>
<td>Publish with multiple sync subscribers</td>
<td style="text-align: right;">4.036 us</td>
<td style="text-align: right;">0.546 us</td>
<td style="text-align: right;">-86 %</td>
<td style="text-align: right;">10.91 KB</td>
<td style="text-align: right;">0.904 KB</td>
<td style="text-align: right;">-92 %</td>
</tr>
<tr>
<td>Publish with multiple async subscribers</td>
<td style="text-align: right;">8.484 us</td>
<td style="text-align: right;">1.657 us</td>
<td style="text-align: right;">-80 %</td>
<td style="text-align: right;">13.65 KB</td>
<td style="text-align: right;">1.374 KB</td>
<td style="text-align: right;">-90 %</td>
</tr>
<tr>
<td>Publish with multiple sync and async subscribers</td>
<td style="text-align: right;">5.858 us</td>
<td style="text-align: right;">2.274 us</td>
<td style="text-align: right;">-61 %</td>
<td style="text-align: right;">11.65 KB</td>
<td style="text-align: right;">1.807 KB</td>
<td style="text-align: right;">-85 %</td>
</tr>
<tr>
<td>PublishAsync with single sync subscriber</td>
<td style="text-align: right;">3.396 us</td>
<td style="text-align: right;">0.557 us</td>
<td style="text-align: right;">-84 %</td>
<td style="text-align: right;">10.32 KB</td>
<td style="text-align: right;">0.904 KB</td>
<td style="text-align: right;">-91 %</td>
</tr>
<tr>
<td>PublishAsync with single async subscriber</td>
<td style="text-align: right;">5.861 us</td>
<td style="text-align: right;">1.804 us</td>
<td style="text-align: right;">-69 %</td>
<td style="text-align: right;">11.11 KB</td>
<td style="text-align: right;">2.062 KB</td>
<td style="text-align: right;">-81 %</td>
</tr>
<tr>
<td>PublishAsync with multiple sync subscribers</td>
<td style="text-align: right;">3.997 us</td>
<td style="text-align: right;">0.564 us</td>
<td style="text-align: right;">-86 %</td>
<td style="text-align: right;">10.63 KB</td>
<td style="text-align: right;">0.904 KB</td>
<td style="text-align: right;">-91 %</td>
</tr>
<tr>
<td>PublishAsync with multiple async subscribers</td>
<td style="text-align: right;">14.188 us</td>
<td style="text-align: right;">1.818 us</td>
<td style="text-align: right;">-87 %</td>
<td style="text-align: right;">12.53 KB</td>
<td style="text-align: right;">2.062 KB</td>
<td style="text-align: right;">-84 %</td>
</tr>
<tr>
<td>PublishAsync with multiple sync and async subscribers</td>
<td style="text-align: right;">7.038 us</td>
<td style="text-align: right;">2.724 us</td>
<td style="text-align: right;">-61 %</td>
<td style="text-align: right;">11.29 KB</td>
<td style="text-align: right;">2.892 KB</td>
<td style="text-align: right;">-74 %</td>
</tr>
</tbody>
</table>
<h3 id="kafka-producer">Kafka Producer</h3>
<p>Publishing 1000 messages to Kafka (running in docker on the local machine) to a single topic using a single producer.</p>
<h4 id="v451-1">v4.5.1</h4>
<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">Error</th>
<th style="text-align: right;">StdDev</th>
<th style="text-align: right;">Ratio</th>
<th style="text-align: right;">Gen0</th>
<th style="text-align: right;">Allocated</th>
<th style="text-align: right;">Alloc Ratio</th>
</tr>
</thead>
<tbody>
<tr>
<td>PublishAsync inside foreach</td>
<td style="text-align: right;">15.54 s</td>
<td style="text-align: right;">0.007 s</td>
<td style="text-align: right;">0.006 s</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2000.0000</td>
<td style="text-align: right;">21.58 MB</td>
<td style="text-align: right;">1.00</td>
</tr>
</tbody>
</table>
<h4 id="v500-1">v5.0.0</h4>
<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">Error</th>
<th style="text-align: right;">StdDev</th>
<th style="text-align: right;">Ratio</th>
<th style="text-align: right;">Gen0</th>
<th style="text-align: right;">Gen1</th>
<th style="text-align: right;">Allocated</th>
<th style="text-align: right;">Alloc Ratio</th>
</tr>
</thead>
<tbody>
<tr>
<td>PublishAsync inside foreach</td>
<td style="text-align: right;">15,534.45 ms</td>
<td style="text-align: right;">6.023 ms</td>
<td style="text-align: right;">5.634 ms</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">-</td>
<td style="text-align: right;">-</td>
<td style="text-align: right;">7.24 MB</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr>
<td>WrapAndPublishBatchAsync</td>
<td style="text-align: right;">15.61 ms</td>
<td style="text-align: right;">0.207 ms</td>
<td style="text-align: right;">0.193 ms</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">421.8750</td>
<td style="text-align: right;">281.2500</td>
<td style="text-align: right;">4.32 MB</td>
<td style="text-align: right;">0.60</td>
</tr>
</tbody>
</table>
<h4 id="comparison-v500-vs-v451-1">Comparison v5.0.0 vs. v4.5.1</h4>
<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align: right;">Mean 4.5.1</th>
<th style="text-align: right;">Mean 5.0.0</th>
<th style="text-align: right;">Mean Diff</th>
<th style="text-align: right;">Allocated 4.5.1</th>
<th style="text-align: right;">Allocated 5.0.0</th>
<th style="text-align: right;">Allocated Diff</th>
</tr>
</thead>
<tbody>
<tr>
<td>PublishAsync inside foreach</td>
<td style="text-align: right;">15.54 s</td>
<td style="text-align: right;">15.53 s</td>
<td style="text-align: right;">0 %</td>
<td style="text-align: right;">21.58 MB</td>
<td style="text-align: right;">7.24 MB</td>
<td style="text-align: right;">-66 %</td>
</tr>
<tr>
<td>WrapAndPublishBatchAsync</td>
<td style="text-align: right;">*15.54 s</td>
<td style="text-align: right;">0.02 s</td>
<td style="text-align: right;">-99.9 %</td>
<td style="text-align: right;">21.58 MB</td>
<td style="text-align: right;">4.32 MB</td>
<td style="text-align: right;">-80 %</td>
</tr>
</tbody>
</table>
<ul>
<li><code>WrapAndPublishBatchAsync</code> did not exist in v4.5.1 so it's compared against <code>PublishAsync</code> inside a <code>foreach</code>, being it the only straightforward possibility in v4.5.1.</li>
</ul>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/beagle1984/silverback/blob/master/docs/peformance.md/#L1" class="contribution-link">Improve this doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="footer">
          <div class="container contacts">
            <a href="https://github.com/BEagle1984" rel="nofollow noopener noreferrer"><i class='fab fa-github'></i> GitHub</a>
            <a href="mailto:silverback-project@outlook.com" rel="nofollow noopener noreferrer"><i class='fas fa-envelope'></i> E-Mail</a>
          </div>
          <div class="container">
            <span class="pull-right">
              <a href="#top">&uarr; Back to top</a>
            </span>
      © 2025 Sergio Aquilini
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
